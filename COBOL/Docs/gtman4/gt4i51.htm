<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 7.0.5.1025" />
  <meta name="TEMPLATEBASE" content="Acucorp WWH" />
  <meta name="LASTUPDATED" content="06/15/06 14:43:47" />
  <title>C$GETLASTFILEOP Routine</title>
  <link rel="StyleSheet" href="document.css" type="text/css" />
  <link rel="StyleSheet" href="catalog.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");
   // -->
  </script>
 </head>

 <body onLoad="WWHUpdate();">

    <a href="../docs.htm" target="acudoc"><img src="images/sbooks.gif" width="70" height="27" border="0" alt="Books" align="right" /></a>
    <span style="font-size: 18px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       ACUCOBOL-GT Appendices <br />
    </font></span>
    <span style="font-size: 14px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       Version 7.2
     </font></span>

 <p />

 <blockquote>
<p class="breadcrumb"><a href="gt4i.htm">Appendix I:  ACUCOBOL-GT Library Routines</a> &gt; <a href="gt4i2.htm">I.1 Library Routines</a> &gt; </p>
<a name="wp1035998"> </a><h2 class="pHeading2">
C$GETLASTFILEOP Routine
</h2>
<a name="wp1036002"> </a><p class="pBody">
C$GETLASTFILEOP retrieves information about the last file operation performed. 
</p>
<a name="wp1036003"> </a><h3 class="pHeadingRef">
Usage
</h3>
<div class="pPreformatted"><pre class="pPreformatted">
CALL &quot;C$GETLASTFILEOP&quot; <a name="wp1036004"> </a>
    USING OPERATION, ADDR, X-ADDR<a name="wp1036005"> </a>
</pre></div>
<a name="wp1036006"> </a><h3 class="pHeadingRef">
Parameters
</h3>
<a name="wp1036007"> </a><p class="pBody">
<b class="cBold">OPERATION</b>   PIC X(n) 
</p>
<a name="wp1036008"> </a><p class="pBody">
Receives the name of the last file operation performed in the current thread.  If the current thread has not performed any file operations, then OPERATION is set to spaces.  The possible values are:
</p>
<a name="wp1061668"> </a><p class="pBody">
</p><div>
<table border="0" cellpadding="6" cellspacing="1">
  <caption></caption>
  <tr align="left" valign="top">    <td><a name="wp1061706"> </a><p class="pCellBody">
Close
</p>
</td>
    <td><a name="wp1061708"> </a><p class="pCellBody">
ReadPreviousLock
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1061710"> </a><p class="pCellBody">
Commit
</p>
</td>
    <td><a name="wp1061712"> </a><p class="pCellBody">
ReadPreviousNoLock
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1061714"> </a><p class="pCellBody">
Delete
</p>
</td>
    <td><a name="wp1061716"> </a><p class="pCellBody">
Rewrite
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1061718"> </a><p class="pCellBody">
DeleteFile
</p>
</td>
    <td><a name="wp1061720"> </a><p class="pCellBody">
Rollback
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1061722"> </a><p class="pCellBody">
Open
</p>
</td>
    <td><a name="wp1061724"> </a><p class="pCellBody">
Start
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1061726"> </a><p class="pCellBody">
ReadLock
</p>
</td>
    <td><a name="wp1061728"> </a><p class="pCellBody">
StartTransaction
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1061730"> </a><p class="pCellBody">
ReadNextLock
</p>
</td>
    <td><a name="wp1061732"> </a><p class="pCellBody">
Unlock
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1061734"> </a><p class="pCellBody">
ReadNextNoLock
</p>
</td>
    <td><a name="wp1061736"> </a><p class="pCellBody">
UnlockAll
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1061738"> </a><p class="pCellBody">
ReadNoLock
</p>
</td>
    <td><a name="wp1061740"> </a><p class="pCellBody">
Write
</p>
</td>
</tr>
</table>
</div>
<p class="pBody">
</p>
<a name="wp1061678"> </a><p class="pBody">
If the current thread has not performed any file operations, then OPERATION is set to spaces.
</p>
<a name="wp1036019"> </a><p class="pBody">
<b class="cBold">ADDR</b>    Numeric (optional) 
</p>
<a name="wp1036020"> </a><p class="pBody">
Receives the virtual address of the instruction that performed the last file operation in the current thread.  If no operation has been performed, zero is returned.
</p>
<a name="wp1036021"> </a><p class="pBody">
<b class="cBold">X-ADDR</b>   PIC X(n) (optional) 
</p>
<a name="wp1036022"> </a><p class="pBody">
Receives a 6-character string that contains the hexadecimal equivalent of the value returned in ADDR.
</p>
<a name="wp1036023"> </a><h3 class="pHeadingRef">
Description
</h3>
<a name="wp1036024"> </a><p class="pBody">
C$GETLASTFILEOP should be called from Declaratives when an unexpected I/O error has occurred.  The return values can be useful in some debugging or customer support scenarios.  
</p>
<a name="wp1036025"> </a><p class="pBody">
The ADDR parameter is provided primarily for compatibility with other COBOL systems.  You would normally convert the value returned by ADDR to hexadecimal and look up the result in the program's compiler listing.  As a convenience, the X-ADDR parameter performs the hexadecimal conversion for you.  You can omit the ADDR parameter by specifying &quot;NULL&quot; or &quot;OMITTED&quot; in the CALL statement, for example:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
77  FILE-OP     PIC X(20).<a name="wp1036026"> </a>
77  X-ADDR      PIC X(6).<a name="wp1036027"> </a>
CALL &quot;C$GETLASTFILEOP&quot; USING FILE-OP, NULL, X-ADDR<a name="wp1036028"> </a>
</pre></div>
<a name="wp1036029"> </a><p class="pBody">
This routine always returns a value of &quot;0&quot; for ADDR and X-ADDR when called by a Version 5.1, or earlier, native-code object file.  Non-native object files return correct values regardless of version.  
</p>
 </blockquote>

 <hr />

 <table align="left" border="0" cellspacing="0" cellpadding="0">
   <tr>
     <td align="left" width="300">
       <span style="font-size: 12px ; font-weight: bold ; font-family: Arial, Helvetica, sans-serif">
         <a href="http://www.acucorp.com">Acucorp, Inc.</a><br />
       </span>
       <span style="font-size: 10px ; font-family: Arial, Helvetica, sans-serif">
         Voice: 800.262.6585 (U.S.A. and Canada)<br />
         Voice: 858.689.4500<br />
         Fax: 858.689.4550<br />
         Please share your comments on this manual<br />
         or on any Acucorp documentation with the<br />
         <a href="mailto:docfeedback@acucorp.com subject=E-01-DS-060621-ACUCOBOL-GT-7.2">Acucorp Communications Department</a>.<br />
       </span>
     </td>
   </tr>
 </table>

<script type="text/javascript" language="JavaScript1.2">
   <!--
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag());
   // -->
  </script>

 
</body>
</html>
