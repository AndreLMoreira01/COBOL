<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 7.0.5.1025" />
  <meta name="TEMPLATEBASE" content="Acucorp WWH" />
  <meta name="LASTUPDATED" content="06/14/06 08:21:09" />
  <title>3.3.15  Changing Record Size</title>
  <link rel="StyleSheet" href="document.css" type="text/css" />
  <link rel="StyleSheet" href="catalog.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");
   // -->
  </script>
 </head>

 <body onLoad="WWHUpdate();">

    <a href="../docs.htm" target="acudoc"><img src="images/sbooks.gif" width="70" height="27" border="0" alt="Books" align="right" /></a>
    <span style="font-size: 18px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       ACUCOBOL-GT User's Guide <br />
    </font></span>
    <span style="font-size: 14px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       Version 7.2
     </font></span>

 <p />

 <blockquote>
<p class="breadcrumb"><a href="gt13.htm"><br />Chapter 3:  Debugger and Utilities</a> &gt; <a href="gt1335.htm">3.3  Vision File Utility - vutil</a> &gt; </p>
<a name="wp1033580"> </a><h2 class="pHeading2">
3.3.15  Changing Record Size
</h2>
<a name="wp1033585"> </a><p class="pBody">
The &quot;augment&quot; option makes it possible to increase the maximum record size of a Vision file.  This is useful for adding fields to a record without having to rebuild the entire data file.  The new maximum record size and the file name is specified as shown in the examples below.  This command format is:
</p>
<div class="pPreformatted"><pre class="pPreformatted">
vutil -augment [ -q ] <em class="cEmphasis">new_max_rec_size</em> <em class="cEmphasis">filename</em><a name="wp1045743"> </a>
</pre></div>
<a name="wp1059942"> </a><p class="pBody">
For example:
</p>
<div class="pPreformatted"><pre class="pPreformatted">
vutil -augment -q 50 myfile.dat&#160;<a name="wp1033587"> </a>
</pre></div>
<a name="wp1045742"> </a><p class="pBody">
or
</p>
<div class="pPreformatted"><pre class="pPreformatted">
cat vision_filelist | vutil -augment -q 100<a name="wp1033588"> </a>
</pre></div>
<a name="wp1033589"> </a><p class="pBody">
If the Vision file originally had a fixed-length record size, and if the new maximum record size is larger than the old maximum record size, the file effectively has a variable-length record size after running this command.
</p>
<a name="wp1033590"> </a><p class="pBody">
You may specify a new maximum record size that is smaller than the current maximum record size, but not smaller than the current minimum record size.  This enables you to correct for the case that the maximum was too large.  Be careful, however, because if any records were added while the maximum was at the higher level, the file is marked as broken when those records are next read.  Vision detects that a record exists that is larger than the current (reduced) maximum record size and raises an error.  When you use &quot;vutil&#160;-augment&quot; to reduce the maximum record size,<b class="cBold"> vutil</b> issues a warning.
</p>
<a name="wp1033591"> </a><p class="pBody">
Anytime you change the file record size with the &quot;augment&quot; option, you should consider the need to modify existing FDs to reflect the new maximum record size.  Changing the characteristics of a file without making changes to existing FDs will cause a mismatch to be detected at runtime when the file is opened, resulting in a file-status error 39 (&quot;Existing file conflicts with the COBOL description of the file&quot;).
</p>
<a name="wp1033592"> </a><p class="pBody">
Because this operation changes the logical structure of the file, exclusive file access is required.  <b class="cBold">Vutil</b> reports &quot;File locked&quot; if any other process has the file open.
</p>
<a name="wp1033593"> </a><p class="pBody">
The &quot;-q&quot; option causes <b class="cBold">vutil</b> to exit (with status 99) if user interaction is required.
</p>
 </blockquote>

 <hr />

 <table align="left" border="0" cellspacing="0" cellpadding="0">
   <tr>
     <td align="left" width="300">
       <span style="font-size: 12px ; font-weight: bold ; font-family: Arial, Helvetica, sans-serif">
         <a href="http://www.acucorp.com">Acucorp, Inc.</a><br />
       </span>
       <span style="font-size: 10px ; font-family: Arial, Helvetica, sans-serif">
         Voice: 800.262.6585 (U.S.A. and Canada)<br />
         Voice: 858.689.4500<br />
         Fax: 858.689.4550<br />
         Please share your comments on this manual<br />
         or on any Acucorp documentation with the<br />
         <a href="mailto:docfeedback@acucorp.com">Acucorp Communications Department</a>.<br />
       </span>
     </td>
   </tr>
 </table>

<script type="text/javascript" language="JavaScript1.2">
   <!--
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag());
   // -->
  </script>

 
</body>
</html>
