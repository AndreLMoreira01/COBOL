<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 7.0.5.1025" />
  <meta name="TEMPLATEBASE" content="Acucorp WWH" />
  <meta name="LASTUPDATED" content="06/14/06 08:21:09" />
  <title>3.6.1  Syntax and Options</title>
  <link rel="StyleSheet" href="document.css" type="text/css" />
  <link rel="StyleSheet" href="catalog.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");
   // -->
  </script>
 </head>

 <body onLoad="WWHUpdate();">

    <a href="../docs.htm" target="acudoc"><img src="images/sbooks.gif" width="70" height="27" border="0" alt="Books" align="right" /></a>
    <span style="font-size: 18px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       ACUCOBOL-GT User's Guide <br />
    </font></span>
    <span style="font-size: 14px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       Version 7.2
     </font></span>

 <p />

 <blockquote>
<p class="breadcrumb"><a href="gt13.htm"><br />Chapter 3:  Debugger and Utilities</a> &gt; <a href="gt1381.htm">3.6  logutil</a> &gt; </p>
<a name="wp1034200"> </a><h2 class="pHeading2">
3.6.1  Syntax and Options
</h2>
<a name="wp1067130"> </a><h3 class="pHeadingRef">
Syntax
</h3>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
logutil	[ -filv ]  [ -d begin_date  [ end_date ] ]  <a name="wp1034204"> </a>
  [ -t begin_time  [ end_time ] ]  [ -u user ] <a name="wp1043288"> </a>
  [ -r begin_location  [ end_location ] ]  [ -h num ]<a name="wp1043289"> </a>
  [ -e new_log_file_name ]  log_file_name<a name="wp1043290"> </a>
</pre></div>
<a name="wp1034205"> </a><h3 class="pHeadingRef">
Options
</h3>
<a name="wp1054213"> </a><p class="pBodyRelative">
</p><div>
<table border="0" cellpadding="6" cellspacing="1">
  <caption></caption>
  <tr align="left" valign="top">    <td><a name="wp1054219"> </a><p class="pCellBody">
<b class="cBold">-f</b>
</p>
</td>
    <td><a name="wp1054221"> </a><p class="pCellBody">
full listing, lists selection on standard output (implies -i).
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1054223"> </a><p class="pCellBody">
<b class="cBold">-i</b>
</p>
</td>
    <td><a name="wp1054225"> </a><p class="pCellBody">
prints summary information at end of listing.
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1054227"> </a><p class="pCellBody">
<b class="cBold">-l</b>
</p>
</td>
    <td><a name="wp1054229"> </a><p class="pCellBody">
report location information.
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1054231"> </a><p class="pCellBody">
<b class="cBold">-v</b>
</p>
</td>
    <td><a name="wp1054233"> </a><p class="pCellBody">
verbose option, includes record images (implies -f).
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1054235"> </a><p class="pCellBody">
<b class="cBold">-d</b>
</p>
</td>
    <td><a name="wp1054237"> </a><p class="pCellBody">
limits selection by date.
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1054239"> </a><p class="pCellBody">
<b class="cBold">-t</b>
</p>
</td>
    <td><a name="wp1054241"> </a><p class="pCellBody">
limits selection by time.  Uses 24-hour clock.
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1054243"> </a><p class="pCellBody">
<b class="cBold">-u</b>
</p>
</td>
    <td><a name="wp1054245"> </a><p class="pCellBody">
selects transactions for a particular user only.
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1054247"> </a><p class="pCellBody">
<b class="cBold">-r</b>
</p>
</td>
    <td><a name="wp1054249"> </a><p class="pCellBody">
selects transactions within the two locations you provide
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1054251"> </a><p class="pCellBody">
<b class="cBold">-h</b>
</p>
</td>
    <td><a name="wp1054253"> </a><p class="pCellBody">
num is the frequency with which header lines will be printed.
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1054255"> </a><p class="pCellBody">
<b class="cBold">-e</b>
</p>
</td>
    <td><a name="wp1054257"> </a><p class="pCellBody">
extracts selected section into a new log file.
</p>
</td>
</tr>
</table>
</div>
<p class="pBodyRelative">
</p>
<a name="wp1034217"> </a><p class="pBody">
If you do not specify any options on the command line, <b class="cBold">logutil</b> acts as if &quot;-i&quot; were specified and prints only summary information.
</p>
<a name="wp1034218"> </a><h3 class="pHeadingRef">
-v option
</h3>
<a name="wp1046941"> </a><p class="pBody">
If the &quot;-v&quot; option is used, record images are displayed in a format similar to the following:
</p>
<a name="wp1046944"> </a><p class="pBody">
<b class="cBold">Record Image:</b>
</p>
<div class="pPreformatted"><pre class="pPreformatted">
0015  0001  2ce2  dffc  0000  55dd0000  646f  ...,.....U...do<a name="wp1046945"> </a>
7669  6400  6163  7563  6f62  6f6c      00    vid.acucobol.<a name="wp1046946"> </a>
</pre></div>
<a name="wp1046948"> </a><h3 class="pHeadingRef">
-i option
</h3>
<a name="wp1034228"> </a><p class="pBody">
<b class="cBold">logutil</b> may be used to monitor transaction log activity.  If you run it with only the &quot;-i&quot; option, or with no options, it sends a summary report to standard output.  This report contains statistics, version information, and warning messages.  One or both of the two warning messages below may appear, as shown in the following report:
</p>
<div class="pPreformatted"><pre class="pPreformatted">
<b class="cBold">logutil corruptlog </b><a name="wp1034232"> </a>
Log File                 :   corruptlog<a name="wp1034233"> </a>
WARNING: COMMIT BEGIN WITHOUT MATCHING COMMIT END IN LOG FILE<a name="wp1034234"> </a>
WARNING: START TRANSACTIONS WITHOUT MATCHING ROLLBACKS<a name="wp1034235"> </a>
   OR COMMITS<a name="wp1067205"> </a>
Total Size               :   2366 bytes<a name="wp1034236"> </a>
Number of Records        :   79<a name="wp1034237"> </a>
Mean Record Size         :   29 bytes<a name="wp1034238"> </a>
Number of Transactions   :   17<a name="wp1034239"> </a>
Mean Transaction Size    :   139 bytes<a name="wp1034240"> </a>
Record Version(s)        :   1<a name="wp1034241"> </a>
</pre></div>
<a name="wp1034243"> </a><p class="pBody">
The warning &quot;COMMIT BEGIN WITHOUT MATCHING COMMIT END IN LOG FILE&quot; means that the last record in the log file is not a type CE (Commit End) record.  This means that, during a commit:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<a name="wp1034244"> </a><div class="pSmartList1"><li>the log file was being updated at the time logutil was run</li></div>
<a name="wp1034245"> </a><div class="pSmartList1"><li>or a process was killed with an uncatchable signal</li></div>
<a name="wp1034246"> </a><div class="pSmartList1"><li>or a system failure occurred </li></div>
</ul></div>
<a name="wp1034247"> </a><p class="pBody">
In the case of a killed process with an uncatchable signal, or a system failure, the next START TRANSACTION using the corrupted log file will return TRANSACTION-STATUS 12.
</p>
<a name="wp1034248"> </a><p class="pBody">
The warning &quot;2 START TRANSACTIONS WITHOUT MATCHING ROLLBACKS OR COMMITS&quot; means that there are two transactions that have yet to be committed or rolled back.  This could indicate a problem if there are no runtime processes currently using the log file.
</p>
<a name="wp1034249"> </a><h3 class="pHeadingRef">
-d option
</h3>
<a name="wp1034250"> </a><p class="pBody">
The logutil utility date filter, &quot;-d&quot; command line option, requires you to specify years in the 4-digit format.  If you enter a year value less than &quot;1900&quot;, <b class="cBold">logutil</b> reports &quot;logutil: use 4 digit year specification&quot;.
</p>
<a name="wp1034251"> </a><h3 class="pHeadingRef">
logutil example #1
</h3>
<a name="wp1034252"> </a><p class="pBody">
To list all records for a user named &quot;randy&quot; that were written on November&#160;11th between 4:50 P.M. and 5:00 P.M. to a log file called &quot;mylog&quot;, you would use the following command:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
logutil -fu randy -d 11/11 -t 16:50 17:00 mylog<a name="wp1034253"> </a>
</pre></div>
<a name="wp1034254"> </a><p class="pBody">
You will see something similar to the following report:
</p>
<div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1047099"> </a>
<u class="cUnderline">TY</u>  <u class="cUnderline">PID</u>     <u class="cUnderline">Term</u>  <u class="cUnderline">Client</u>    <u class="cUnderline">User</u>   <u class="cUnderline">Date/Time</u>       <u class="cUnderline">File ID</u>   <u class="cUnderline">Filename</u><a name="wp1067207"> </a>
ST  21981   tty0  acucobol  randy  11/11 16:50:12  <a name="wp1034259"> </a>
CB  21981   tty0  acucobol  randy  11/11 16:50:12  <a name="wp1034260"> </a>
MA  21981   tty0  acucobol  randy  11/11 16:50:12            test.dat<a name="wp1034261"> </a>
OP  21981   tty0  acucobol  randy  11/11 16:50:12  07700001  test.dat<a name="wp1034262"> </a>
CE  21981   tty0  acucobol  randy  11/11 16:50:12  <a name="wp1034263"> </a>
ST  21981   tty0  acucobol  randy  11/11 16:56:40  <a name="wp1034264"> </a>
CB  21981   tty0  acucobol  randy  11/11 16:56:40  <a name="wp1034265"> </a>
WR  21981   tty0  acucobol  randy  11/11 16:56:40  07700001   <a name="wp1034266"> </a>
DE  21981   tty0  acucobol  randy  11/11 16:56:40  07700001   <a name="wp1034267"> </a>
CE  21981   tty0  acucobol  randy  11/11 16:56:41  <a name="wp1034268"> </a>
ST  21981   tty0  acucobol  randy  11/11 16:59:20  <a name="wp1034269"> </a>
CB  21981   tty0  acucobol  randy  11/11 16:59:20  <a name="wp1034270"> </a>
WR  21981   tty0  acucobol  randy  11/11 16:59:20  07700001   <a name="wp1034271"> </a>
RE  21981   tty0  acucobol  randy  11/11 16:59:21  07700001   <a name="wp1034272"> </a>
CE  21981   tty0  acucobol  randy  11/11 16:59:21  <a name="wp1034273"> </a>
-  <a name="wp1034274"> </a>
End of log.<a name="wp1034275"> </a>
Total Size               :   580 bytes<a name="wp1034276"> </a>
Number of Records        :   15<a name="wp1034277"> </a>
Mean Record Size         :   38 bytes<a name="wp1034278"> </a>
Number of Transactions   :   3<a name="wp1034279"> </a>
Mean Transaction Size    :   193 bytes<a name="wp1034280"> </a>
Record Version(s)        :   1<a name="wp1034281"> </a>
</pre></div>
<a name="wp1034283"> </a><p class="pBody">
In a transaction log report, path and file names are limited to 17 characters without the &quot;-l&quot; option, or 21 characters with the &quot;-l&quot; option.  Should the path and file name exceed that limit, the report will attempt to display all of the file name.  If room permits, this will be followed by the file's parent directory, root directory, and subdirectories.  Path name components that must be omitted are represented by an ellipsis (...). 
</p>
<a name="wp1034284"> </a><h3 class="pHeadingRef">
logutil example #2
</h3>
<a name="wp1034285"> </a><p class="pBody">
To create a new log file called &quot;newlog&quot; that will contain the records reported above, use the &quot;-e&quot; option as follows:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
logutil -u randy -d 11/11 -t 16:50 17:00 -e newlog mylog<a name="wp1034286"> </a>
</pre></div>
 </blockquote>

 <hr />

 <table align="left" border="0" cellspacing="0" cellpadding="0">
   <tr>
     <td align="left" width="300">
       <span style="font-size: 12px ; font-weight: bold ; font-family: Arial, Helvetica, sans-serif">
         <a href="http://www.acucorp.com">Acucorp, Inc.</a><br />
       </span>
       <span style="font-size: 10px ; font-family: Arial, Helvetica, sans-serif">
         Voice: 800.262.6585 (U.S.A. and Canada)<br />
         Voice: 858.689.4500<br />
         Fax: 858.689.4550<br />
         Please share your comments on this manual<br />
         or on any Acucorp documentation with the<br />
         <a href="mailto:docfeedback@acucorp.com">Acucorp Communications Department</a>.<br />
       </span>
     </td>
   </tr>
 </table>

<script type="text/javascript" language="JavaScript1.2">
   <!--
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag());
   // -->
  </script>

 
</body>
</html>
