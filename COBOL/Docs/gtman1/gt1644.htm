<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 7.0.5.1025" />
  <meta name="TEMPLATEBASE" content="Acucorp WWH" />
  <meta name="LASTUPDATED" content="06/14/06 08:22:19" />
  <title>6.8.2  Data Sharing Among Threads</title>
  <link rel="StyleSheet" href="document.css" type="text/css" />
  <link rel="StyleSheet" href="catalog.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");
   // -->
  </script>
 </head>

 <body onLoad="WWHUpdate();">

    <a href="../docs.htm" target="acudoc"><img src="images/sbooks.gif" width="70" height="27" border="0" alt="Books" align="right" /></a>
    <span style="font-size: 18px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       ACUCOBOL-GT User's Guide <br />
    </font></span>
    <span style="font-size: 14px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       Version 7.2
     </font></span>

 <p />

 <blockquote>
<p class="breadcrumb"><a href="gt16.htm"><br />Chapter 6:  Programmer's Guide</a> &gt; <a href="gt1641.htm">6.8  Multiple Execution Threads </a> &gt; </p>
<a name="wp1033148"> </a><h2 class="pHeading2">
6.8.2  Data Sharing Among Threads
</h2>
<a name="wp1033151"> </a><p class="pBody">
In the program that created it, a thread and its parent thread share the same data.  This includes both working-storage and files (including the file's open state and record position).  Thus any changes made in one thread will be seen by the other thread.  The only data that are not shared are those items internally generated by the compiler that are related to the flow of control within a thread, such as a paragraph's return address or an internal counter associated with PERFORM &quot;N&quot; TIMES.  
</p>
<a name="wp1033152"> </a><p class="pBody">
When a thread CALLs a program, any data local to that program are private to that thread (and its child threads).  As a result, you can write utility routines that many threads can call, without having to worry about data sharing issues in the utility.  Note that any data passed (BY REFERENCE) to the called program are shared if they are shared in the program passing the data.  
</p>
<a name="wp1033153"> </a><p class="pBody">
External data items and external files are always shared by all threads.  
</p>
<a name="wp1033155"> </a><p class="pBody">
ACUCOBOL-GT ensures that any one logical operation on a data item is fully completed before control switches between threads.  Consider the following example:
</p>
<div class="pPreformatted"><pre class="pPreformatted">
77  DATA-1     PIC X(3).<a name="wp1033156"> </a>
<a name="wp1033157"> </a>
PERFORM THREAD<a name="wp1033158"> </a>
    MOVE &quot;ABC&quot; TO DATA-1<a name="wp1033159"> </a>
END-PERFORM<a name="wp1033160"> </a>
MOVE &quot;DEF&quot; TO DATA-1<a name="wp1033161"> </a>
WAIT FOR LAST THREAD<a name="wp1033162"> </a>
DISPLAY DATA-1<a name="wp1033163"> </a>
</pre></div>
<a name="wp1033164"> </a><p class="pBody">
The last DISPLAY will either print &quot;ABC&quot; or &quot;DEF&quot; depending on the order in which the threads execute.  It will not, however, print something like &quot;AEF&quot; or &quot;DEC&quot; because each MOVE that affects DATA-1 is performed in its entirety before control switches between threads.  
</p>
 </blockquote>

 <hr />

 <table align="left" border="0" cellspacing="0" cellpadding="0">
   <tr>
     <td align="left" width="300">
       <span style="font-size: 12px ; font-weight: bold ; font-family: Arial, Helvetica, sans-serif">
         <a href="http://www.acucorp.com">Acucorp, Inc.</a><br />
       </span>
       <span style="font-size: 10px ; font-family: Arial, Helvetica, sans-serif">
         Voice: 800.262.6585 (U.S.A. and Canada)<br />
         Voice: 858.689.4500<br />
         Fax: 858.689.4550<br />
         Please share your comments on this manual<br />
         or on any Acucorp documentation with the<br />
         <a href="mailto:docfeedback@acucorp.com">Acucorp Communications Department</a>.<br />
       </span>
     </td>
   </tr>
 </table>

<script type="text/javascript" language="JavaScript1.2">
   <!--
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag());
   // -->
  </script>

 
</body>
</html>
