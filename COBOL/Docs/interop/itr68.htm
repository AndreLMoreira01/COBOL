<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 7.0.6.1058" />
  <meta name="TEMPLATEBASE" content="Acucorp WWH" />
  <meta name="LASTUPDATED" content="06/08/06 15:00:06" />
  <title>6.3.1.3  Loading shared libraries with the CALL statement</title>
  <link rel="StyleSheet" href="document.css" type="text/css" />
  <link rel="StyleSheet" href="catalog.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");
   // -->
  </script>
 </head>

 <body onLoad="WWHUpdate();">

    <a href="../docs.htm" target="acudoc"><img src="images/sbooks.gif" width="70" height="27" border="0" alt="Books" align="right" /></a>
    <span style="font-size: 18px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       A Guide to Interoperating with ACUCOBOL-GT <br />
    </font></span>
    <span style="font-size: 14px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       Version 7.2
     </font></span>

 <p />

 <blockquote>
<p class="breadcrumb"><a href="itr6.htm">Chapter 6: Working with C and C++ Programs</a> &gt; <a href="itr64.htm">6.3  Calling C Programs From COBOL</a> &gt; <a href="itr65.htm">6.3.1  Calling C Programs in DLLs or Shared Object Libraries</a> &gt; </p>
<a name="wp1121443"> </a><h2 class="pHeading3">
6.3.1.3  Loading shared libraries with the CALL statement
</h2>
<a name="wp1135349"> </a><p class="pBody">
You can load a shared object library programatically with the CALL statement.  Once the shared library is loaded, you can call any function exported by the library with a CALL statement (for syntax and rules, see the entry for the CALL verb in section 6.6 in <em class="cEmphasis">ACUCOBOL-GT Reference Manual</em>).  For example, the following statement loads &quot;sharedlibrary.so&quot;:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
CALL &quot;sharedlibrary.so&quot;<a name="wp1135684"> </a>
</pre></div>
<a name="wp1136780"> </a><p class="pBody">
As mentioned earlier, the default filename extension of shared libraries is &quot;.so&quot;.  You can specify a different extension in the CALL statement, or the default extension can be redefined with the SHARED_LIBRARY_EXTENSION runtime configuration variable.  See Appendix H in <em class="cEmphasis">ACUCOBOL-GT Appendices</em>.
</p>
<a name="wp1141236"> </a><p class="pBody">
If no relative or absolute path is specified, the runtime looks for the library in the current working directory, the locations specified in the operating system's environment variable for shared libraries (e.g., LIBPATH, LD_LIBRARY_PATH, or SHLIB_PATH), and then in the locations specified in the SHARED_LIBRARY_PREFIX configuration variable (see Appendix&#160;H in <em class="cEmphasis">ACUCOBOL-GT Appendices</em>).
</p>
<a name="wp1136747"> </a><p class="pBody">
Like other programs that are loaded with a CALL statement, you can unload a CALLed shared library with a CANCEL statement.  When you CANCEL a shared library, you may no longer call its exported functions.  Unless the <em class="cEmphasis">logical cancels</em> feature is enabled, all memory used by the program is released.  For information about runtime memory management and the logical cancels feature, see section 6.3, &quot;Memory Management,&quot; in the <em class="cEmphasis">ACUCOBOL-GT User's Guide</em>.
</p>
<a name="wp1135196"> </a><p class="pNote">
<hr />
<b>Note:  </b>While most UNIX systems use a binary format that supports calling subroutines in shared libraries exactly as described in this section,  SCO UNIX (and possibly some other UNIX systems) uses different binary formats, namely COFF and ELF.  On those systems, in order to support calling shared libraries, the objects and executables must be in the ELF format.  See the UNIX &quot;man&quot; page for your C compiler on how to create ELF format objects (on some systems, for example, you specify the &quot;-b elf&quot; C compiler option). 
<hr />
</p>
 </blockquote>

 <hr />

 <table align="left" border="0" cellspacing="0" cellpadding="0">
   <tr>
     <td align="left" width="300">
       <span style="font-size: 12px ; font-weight: bold ; font-family: Arial, Helvetica, sans-serif">
         <a href="http://www.acucorp.com">Acucorp, Inc.</a><br />
       </span>
       <span style="font-size: 10px ; font-family: Arial, Helvetica, sans-serif">
         Voice: 800.262.6585 (U.S.A. and Canada)<br />
         Voice: 858.689.4500<br />
         Fax: 858.689.4550<br />
         Please share your comments on this manual<br />
         or on any Acucorp documentation with the<br />
         <a href="mailto:docfeedback@acucorp.com?subject=E-01-UG-060622-Interop-7.2">Acucorp Communications Department</a>.<br />
       </span>
     </td>
   </tr>
 </table>

<script type="text/javascript" language="JavaScript1.2">
   <!--
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag());
   // -->
  </script>

 
</body>
</html>
