<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 7.0.5.1025" />
  <meta name="TEMPLATEBASE" content="Acucorp WWH" />
  <meta name="LASTUPDATED" content="06/15/06 11:29:19" />
  <title>6.3.4  DATE Directive</title>
  <link rel="StyleSheet" href="document.css" type="text/css" />
  <link rel="StyleSheet" href="catalog.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");
   // -->
  </script>
 </head>

 <body onLoad="WWHUpdate();">

    <a href="../docs.htm" target="acudoc"><img src="images/sbooks.gif" width="70" height="27" border="0" alt="Books" align="right" /></a>
    <span style="font-size: 18px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       AcuODBC User's Guide <br />
    </font></span>
    <span style="font-size: 14px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       Version 7.2
     </font></span>

 <p />

 <blockquote>
<p class="breadcrumb"><a href="odb6.htm">Chapter 6: Mapping COBOL Data Items and Database Fields</a> &gt; <a href="odb69.htm">6.3  Using Directives</a> &gt; </p>
<a name="wp1028716"> </a><h2 class="pHeading2">
6.3.4  DATE Directive
</h2>
<a name="wp1028720"> </a><p class="pBody">
The DATE directive creates a map between the Windows application date fields and COBOL numeric fields.  Because there's no COBOL syntax that identifies a field as a date, you should add this directive to differentiate dates from other numbers.  This way, when a user of a Windows application requests date information, AcuODBC can respond properly.
</p>
<a name="wp1028721"> </a><h3 class="pHeadingRef">
Syntax
</h3>
<div class="pPreformatted"><pre class="pPreformatted">
$XFD DATE=date-format-string<a name="wp1028722"> </a>
</pre></div>
<a name="wp1028723"> </a><p class="pBody">
or
</p>
<div class="pPreformatted"><pre class="pPreformatted">
*(( XFD DATE=date-format-string ))<a name="wp1028724"> </a>
</pre></div>
<a name="wp1028725"> </a><p class="pBody">
The DATE directive implies the NUMERIC directive.
</p>
<a name="wp1028726"> </a><p class="pBody">
The <em class="cEmphasis">date-format-string</em> is a description of the desired date format, composed of characters from the following list:</p><div>
<table border="0" cellpadding="6" cellspacing="1">
  <caption></caption>
  <tr align="left" valign="top">    <td><a name="wp1042620"> </a><p class="pCellBody">
Y
</p>
</td>
    <td><a name="wp1042622"> </a><p class="pCellBody">
year (2 or 4-digit)
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1042624"> </a><p class="pCellBody">
M
</p>
</td>
    <td><a name="wp1042626"> </a><p class="pCellBody">
month (01 - 12)
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1042628"> </a><p class="pCellBody">
D
</p>
</td>
    <td><a name="wp1042630"> </a><p class="pCellBody">
day of month (01 - 31)
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1042632"> </a><p class="pCellBody">
J
</p>
</td>
    <td><a name="wp1042634"> </a><p class="pCellBody">
Julian day (00000000 - 99999999)
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1042636"> </a><p class="pCellBody">
E
</p>
</td>
    <td><a name="wp1042638"> </a><p class="pCellBody">
day of year (001 - 366)
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1042640"> </a><p class="pCellBody">
H
</p>
</td>
    <td><a name="wp1042642"> </a><p class="pCellBody">
hour (00 - 23)
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1042644"> </a><p class="pCellBody">
N
</p>
</td>
    <td><a name="wp1042646"> </a><p class="pCellBody">
minute
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1042648"> </a><p class="pCellBody">
S
</p>
</td>
    <td><a name="wp1042650"> </a><p class="pCellBody">
second
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1042652"> </a><p class="pCellBody">
T
</p>
</td>
    <td><a name="wp1042654"> </a><p class="pCellBody">
hundredth of a second
</p>
</td>
</tr>
</table>
</div>
<p class="pBody">
</p>
<a name="wp1045428"> </a><p class="pBody">
If <em class="cEmphasis">date-format-string</em> contains only date characters (Y, M, D, E or J), the string is treated as a DATE variable.  If <em class="cEmphasis">date-format-string</em> contains only time characters (H, N, S), it is treated as a TIME variable. If <em class="cEmphasis">date-format-string</em> contains any combination of date and time characters, or if it contains fractional seconds (T), it is treated as a TIMESTAMP variable. 
</p>
<a name="wp1045363"> </a><p class="pNote">
<hr />
<b>Note:  </b>Some applications have difficulty processing a <em class="cEmphasis">date-format-string</em> that contains fractional seconds (for example:  HHNNSSTT).  If you are using such an application, modify strings containing fractions to be purely numeric.
<hr />
</p>
<a name="wp1045426"> </a><p class="pBody">
Each character in a <em class="cEmphasis">date-format-string</em> can be considered a place holder that represents the type of information stored at that location.  The characters also determine how many digits will be used for each type of data.  Any other characters cause the <em class="cEmphasis">date-format-string</em> to be invalid.  Invalid formats are automatically treated as numeric data.
</p>
<a name="wp1028753"> </a><p class="pBody">
For example, although you would typically represent the month with two digits, if you specify MMM as part of your date format, the resulting date uses three digits for the month, left-zero-filling the value.  If the month is given as M, the resulting date uses a single digit, and truncates on the left.  
</p>
<a name="wp1028754"> </a><p class="pBody">
If you don't specify a <em class="cEmphasis">date-format</em>-string, the default is YYMMDD if the field has six digits, or YYYYMMDD if the field has eight digits.   
</p>
<a name="wp1028759"> </a><p class="pBody">
It is sometimes desirable to have incomplete date types, for example to have YYYYMM to simply store the year and month.  AcuODBC defaults the month and day to 1, so that incomplete types will be valid.  Note that AcuODBC can handle incomplete date types, but if you have a complete type and invalid date data, AcuODBC cannot handle the date.
</p>
<a name="wp1028760"> </a><h3 class="pHeadingRef">
Julian dates
</h3>
<a name="wp1028764"> </a><p class="pBody">
Because the definition of Julian day varies, the DATE directive offers a great deal of flexibility for representing Julian dates.  Many source books define the Julian day as the day of the year, with January 1st being 001, January 2nd being 002, and so forth.  If you want to use this definition for Julian day, simply use EEE (day of year) in your date formats. 
</p>
<a name="wp1028765"> </a><p class="pBody">
Other reference books define the Julian day as the number of days since some specific &quot;base date&quot; in the past.  This definition is represented in the DATE directive with the letter J (for example, a six-digit date field would be preceded with the directive &quot;$XFD DATE=JJJJJJ&quot;).   The default &quot;base date&quot; for this form of Julian date is January 1, 1900.  
</p>
<a name="wp1028766"> </a><p class="pBody">
You may define your own base date for Julian date calculations by setting the Julian Base Date field on the Advanced tab in the AcuODBC Configuration property sheet.    See <a  href="odb311.htm#wp1030557">section 3.3, &quot;Advanced Options,&quot;</a> for more information.
</p>
<a name="wp1028767"> </a><h3 class="pHeadingRef">
Using group items
</h3>
<a name="wp1028772"> </a><p class="pBody">
You may place the DATE directive in front of a group item, so long as you also use the USE GROUP directive.  For more information, see <a  href="odb619.htm#wp1044530">section 6.3.10</a>.
</p>
<a name="wp1028773"> </a><h3 class="pHeadingRef">
Examples
</h3>
<a name="wp1028774"> </a><p class="pBody">
The source code for the &quot;animals&quot; table contains a group item for the date of the animal's last visit, and an elementary item for the date of the last payment:  
</p>
<div class="pPreformatted"><pre class="pPreformatted">
          05  last_visit.<a name="wp1028775"> </a>
              10  yyyy                    pic 9(4).<a name="wp1028776"> </a>
              10  mm                      pic 9(2).<a name="wp1042547"> </a>
              10  dd                      pic 9(2).<a name="wp1028777"> </a>
          05  fee                         pic s9(5)v99.<a name="wp1044970"> </a>
          05  date_paid                   pic 9(8). <a name="wp1044971"> </a>
</pre></div>
<a name="wp1044972"> </a><p class="pBody">
The date portions of a database table based on source code with this FD look similar to this.  All of these date-related fields are of type NUMBER in the (Access) database.</p><div><img src="images/animals_.gif" height="251" width="250" border="0" hspace="0" vspace="0"/>
</div><p class="pBody">
</p>
<a name="wp1042219"> </a><p class="pBody">
The examples that follow build on this source code.
</p>
<a name="wp1028785"> </a><h3 class="pHeadingRef">
Example 1 - Elementary data item, DATE directive
</h3>
<a name="wp1028786"> </a><p class="pBody">
The &quot;date_paid&quot; field is defined in the sample file as an elementary item of type NUMBER.  Inserting the DATE directive before this line maps the type to DATE/TIME (in Access) and changes the format of the date in the table, as shown below.
</p>
<div class="pPreformatted"><pre class="pPreformatted">
       FILE SECTION.<a name="wp1028787"> </a>
       FD  qa-file.<a name="wp1045087"> </a>
      $XFD COMMENT  This sample file demonstrates directives.<a name="wp1045088"> </a>
       01  qa-record.<a name="wp1028790"> </a>
           03  animal-info.<a name="wp1028791"> </a>
               05  patient-id                  pic x(5).<a name="wp1028792"> </a>
               05  atype                       pic x.<a name="wp1028793"> </a>
               05  ctype redefines atype       pic x.<a name="wp1028794"> </a>
               05  dtype redefines atype       pic x.<a name="wp1028795"> </a>
               05  otype redefines atype       pic x.<a name="wp1028796"> </a>
           03  owner-info.<a name="wp1028797"> </a>
               05  phone                       pic x(8).<a name="wp1028798"> </a>
               05  owner                       pic x(30). <a name="wp1028800"> </a>
           03  financial.<a name="wp1028801"> </a>
               05  acct_no.<a name="wp1028802"> </a>
                   10  year                    pic x(2).<a name="wp1028803"> </a>
                   10  seq_no                  pic x(4).<a name="wp1028804"> </a>
               05  last_visit.<a name="wp1028805"> </a>
                   10  yyyy                    pic 9(4).<a name="wp1042550"> </a>
                   10  mm                      pic 9(2).<a name="wp1028806"> </a>
                   10  dd                      pic 9(2).<a name="wp1028807"> </a>
               05  fee                         pic s9(5)v99.<a name="wp1028810"> </a>
      $XFD DATE=YYYYMMDD<a name="wp1028811"> </a>
               05  date_paid                   pic 9(8).<a name="wp1028812"> </a>
</pre></div>
<a name="wp1028813"> </a><p class="pBody">
The resulting entries in a database table look similar to the following.</p><div><img src="images/date_dir.gif" height="252" width="250" border="0" hspace="0" vspace="0"/>
</div><p class="pBody">
</p>
<a name="wp1028815"> </a><h3 class="pHeadingRef">
Example 2 - Group data item, DATE and USE GROUP directives
</h3>
<a name="wp1028816"> </a><p class="pBody">
If your date information is defined as a group item, you must use both the DATE and USE GROUP directives to map your COBOL numeric data items to Windows application date fields.  Insert the directives on the line preceding the group item.
</p>
<div class="pPreformatted"><pre class="pPreformatted">
       FILE SECTION.<a name="wp1028818"> </a>
       FD  qa-file.<a name="wp1028819"> </a>
      $XFD COMMENT  This sample file demonstrates directives.<a name="wp1028820"> </a>
       01  qa-record.<a name="wp1028821"> </a>
           03  animal-info.<a name="wp1028822"> </a>
               05  patient-id                  pic x(5).<a name="wp1028823"> </a>
               05  atype                       pic x.<a name="wp1028824"> </a>
               05  ctype redefines atype       pic x.<a name="wp1028825"> </a>
               05  dtype redefines atype       pic x.<a name="wp1028826"> </a>
               05  otype redefines atype       pic x.<a name="wp1028827"> </a>
           03  owner-info.<a name="wp1028828"> </a>
               05  phone                       pic x(8).<a name="wp1028829"> </a>
               05  owner                       pic x(30). <a name="wp1028830"> </a>
           03  financial.<a name="wp1028832"> </a>
               05  acct_no.<a name="wp1028833"> </a>
                   10  year                    pic x(2).<a name="wp1028834"> </a>
                   10  seq_no                  pic x(4).<a name="wp1028835"> </a>
      *(( XFD DATE=YYYYMMDD, USE GROUP ))<a name="wp1028836"> </a>
               05  last_visit.<a name="wp1028837"> </a>
                   10  yyyy                    pic 9(4).<a name="wp1042556"> </a>
                   10  mm                      pic 9(2).<a name="wp1028838"> </a>
                   10  dd                      pic 9(2).<a name="wp1028839"> </a>
               05  fee                         pic s9(5)v99.<a name="wp1042287"> </a>
      $XFD DATE=YYYYMMDD<a name="wp1042288"> </a>
               05  date_paid                   pic 9(8).<a name="wp1042289"> </a>
</pre></div>
<a name="wp1028845"> </a><p class="pBody">
The resulting table now has a column with the name of the group item (&quot;last_visit&quot;), which is defined as type DATE/TIME (in Access).</p><div><img src="images/use_grou.gif" height="251" width="341" border="0" hspace="0" vspace="0"/>
</div><p class="pBody">
</p>
 </blockquote>

 <hr />

 <table align="left" border="0" cellspacing="0" cellpadding="0">
   <tr>
     <td align="left" width="300">
       <span style="font-size: 12px ; font-weight: bold ; font-family: Arial, Helvetica, sans-serif">
         <a href="http://www.acucorp.com">Acucorp, Inc.</a><br />
       </span>
       <span style="font-size: 10px ; font-family: Arial, Helvetica, sans-serif">
         Voice: 800.262.6585 (U.S.A. and Canada)<br />
         Voice: 858.689.4500<br />
         Fax: 858.689.4550<br />
         Please share your comments on this manual<br />
         or on any Acucorp documentation with the<br />
         <a href="mailto:docfeedback@acucorp.com?subject=E-01-UG-060621-AcuODBC-7.2">Acucorp Communications Department</a>.<br />
       </span>
     </td>
   </tr>
 </table>

<script type="text/javascript" language="JavaScript1.2">
   <!--
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag());
   // -->
  </script>

 
</body>
</html>
