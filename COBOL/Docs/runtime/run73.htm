<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 7.0.6.1058" />
  <meta name="TEMPLATEBASE" content="Acucorp WWH" />
  <meta name="LASTUPDATED" content="07/13/05 15:22:58" />
  <title>7.2  Examining File Information</title>
  <link rel="StyleSheet" href="document.css" type="text/css" />
  <link rel="StyleSheet" href="catalog.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");
   // -->
  </script>
 </head>

 <body onLoad="WWHUpdate();">

    <a href="../docs.htm" target="acudoc"><img src="images/sbooks.gif" width="70" height="27" border="0" alt="Books" align="right" /></a>
    <span style="font-size: 18px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       ACUCOBOL-GT Runtime Manual <br />
    </font></span>
    <span style="font-size: 14px ; font-weight: bold"><font face="Arial, Helvetica, sans-serif">
       Version 7
     </font></span>

 <p />

 <blockquote>
<p class="breadcrumb"><a href="run7.htm"><br />Chapter 7: vutil File Manager</a> &gt; </p>
<a name="wp1038321"> </a><h2 class="pHeading1">
7.2  Examining File Information
</h2>
<a name="wp1038322"> </a><p class="pBody">
The &quot;info&quot; function of <b class="cBold">vutil</b> returns some basic information about Vision indexed files.  The command syntax is: 
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
vutil  -info  [ -kpxq ]  [ <em class="cEmphasis">files </em>]<a name="wp1038326"> </a>
</pre></div>
<a name="wp1038327"> </a><p class="pBody">
If no files are specified on the command line, then <b class="cBold">vutil</b> reads file names from the standard input.   Several options can be specified with &quot;-info&quot;:
</p>
<a name="wp1038345"> </a><p class="pBodyRelative">
</p><div>
<table border="0" cellpadding="6" cellspacing="1">
  <caption></caption>
  <tr align="left" valign="top">    <td><a name="wp1038330"> </a><p class="pCellBody">
<span style="font-family: Arial, Verdana, Helvetica, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">-p</span> 
</p>
</td>
    <td><a name="wp1038332"> </a><p class="pCellBody">
This option causes <b class="cBold">vutil</b> to pause between files and prompt the user for a &quot;return&quot; key.  Otherwise, all the reports are run together.  
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1038334"> </a><p class="pCellBody">
<b class="cBold">-k<br /></b>&#160;&#160;&#160;&#160;&#160;&#160;
</p>
</td>
    <td><a name="wp1038336"> </a><p class="pCellBody">
This option prints full details about each key, including the exact layout of a multi-segment, or split, key.  Each segment is expressed as a pair of numbers--segment size (sz) and the offset from the beginning of the record (of).
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1038338"> </a><p class="pCellBody">
<b class="cBold">-q</b>
</p>
</td>
    <td><a name="wp1038340"> </a><p class="pCellBody">
This option causes <b class="cBold">vutil</b> to exit (with status 99) if user interaction is required.  
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td><a name="wp1038342"> </a><p class="pCellBody">
<b class="cBold">-x</b> 
</p>
</td>
    <td><a name="wp1038344"> </a><p class="pCellBody">
This option causes vutil to report additional (extended) information.  
</p>
</td>
</tr>
</table>
</div>
<p class="pBodyRelative">
</p>
<a name="wp1038346"> </a><p class="pBody">
The basic information provided by the &quot;info&quot; function consists of:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<a name="wp1038347"> </a><div class="pSmartList1"><li>text in the &quot;comment&quot; field (frequently empty)</li></div>
<a name="wp1038348"> </a><div class="pSmartList1"><li>Vision file format (Version 2, 3, 4, or 5)</li></div>
<a name="wp1038349"> </a><div class="pSmartList1"><li>total number of records</li></div>
<a name="wp1038350"> </a><div class="pSmartList1"><li>total number of deleted records</li></div>
<a name="wp1038351"> </a><div class="pSmartList1"><li>file size of each segment (Version 4 and 5 only)</li></div>
<a name="wp1038352"> </a><div class="pSmartList1"><li>total size of all segments combined (Version 4 and 5 only)</li></div>
<a name="wp1038353"> </a><div class="pSmartList1"><li>segment size (maximum possible; Version 4 and 5 only)</li></div>
<a name="wp1038354"> </a><div class="pSmartList1"><li>record size (min/max)</li></div>
<a name="wp1038355"> </a><div class="pSmartList1"><li>number of keys</li></div>
<a name="wp1038356"> </a><div class="pSmartList1"><li>user count</li></div>
</ul></div>
<a name="wp1038357"> </a><p class="pBody">
If you request extended information with the &quot;-x&quot; option, the following additional information is output:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<a name="wp1038358"> </a><div class="pSmartList1"><li>for each key:  key size (total size and number of segments, if split); key offsets; whether duplicates are allowed</li></div>
<a name="wp1038359"> </a><div class="pSmartList1"><li>block size</li></div>
<a name="wp1038360"> </a><div class="pSmartList1"><li>blocks per granule</li></div>
<a name="wp1038361"> </a><div class="pSmartList1"><li>tree height (max/min/avg)</li></div>
<a name="wp1038362"> </a><div class="pSmartList1"><li>number of nodes</li></div>
<a name="wp1038363"> </a><div class="pSmartList1"><li>number of deleted nodes</li></div>
<a name="wp1038364"> </a><div class="pSmartList1"><li>total node space</li></div>
<a name="wp1038365"> </a><div class="pSmartList1"><li>node space used</li></div>
</ul></div>
<a name="wp1038366"> </a><p class="pBody">
The &quot;tree height&quot; is the number of levels in the B-tree and is directly related to how efficient the file is. If the maximum number exceeds four or five, then the file may benefit from rebuilding with a larger block factor.   For more information, see <a  href="run75.htm#wp1038443">section 7.4, &quot;Rebuilding Files.&quot;</a>  
</p>
<a name="wp1038372"> </a><p class="pBody">
An important piece of information is the <em class="cEmphasis">user count</em>.  The user count is initially set to zero, and is incremented each time the file is opened for I/O.  The number is decremented when the file is subsequently closed.  Under normal circumstances, the user count indicates the number of users who are currently updating the file.  Should <b class="cBold">runcbl</b> terminate abnormally, the user count may not be decremented.  Therefore, if the user count is a non-zero value when there are no active users, it indicates that there may have been a sudden runtime failure and that corrective action may be required.  At the very least, the file should be checked for integrity.   See <a  href="run74.htm#wp1038379">section 7.3, &quot;Testing File Integrity.&quot;</a>  Depending on the program that died, more significant action may need to be taken.  A non-zero user count indicates that someone knowledgeable about the system should intervene and ensure that everything is okay.  By monitoring the user count, the user count can be used as an early warning system to head off some types of file problems before they surface in a more serious form.  Note that because <b class="cBold">runcbl</b> usually closes all files when it detects an error, it is very unusual that a COBOL coding error will cause a non-zero user count condition.  
</p>
<a name="wp1038377"> </a><p class="pNote">
<hr />
<b>Note:  </b>Unlike RM/COBOL, a non-zero user count is not automatically an indication of a corrupt file.  It merely means that a program has died while it had files open.  
<hr />
</p>
 </blockquote>

 <hr />

 <table align="left" border="0" cellspacing="0" cellpadding="0">
   <tr>
     <td align="left" width="300">
       <span style="font-size: 12px ; font-weight: bold ; font-family: Arial, Helvetica, sans-serif">
         <a href="http://www.acucorp.com">Acucorp, Inc.</a><br />
       </span>
       <span style="font-size: 10px ; font-family: Arial, Helvetica, sans-serif">
         Voice: (800) 262-6585 (U.S.A. and Canada)<br />
         Voice: (858) 689-4500<br />
         Fax: (858) 689-4550<br />
         Please share your comments on this manual<br />
         or on any Acucorp documentation with the<br />
         <a href="mailto:docfeedback@acucorp.com">Acucorp Communications Department</a>.<br />
       </span>
     </td>
   </tr>
 </table>

<script type="text/javascript" language="JavaScript1.2">
   <!--
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag());
   // -->
  </script>

 
</body>
</html>
